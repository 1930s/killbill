---
layout: default
---

<div class="row">
    <div class="span3 bs-docs-sidebar">
        <ul class="nav nav-list bs-docs-sidenav affix">
            <li><a href="#5_minutes">Killbill in 5 minutes</a></li>
            <li><a href="#prod_deployment">Production deployment</a></li>
            <ul class="nav nav-list bs-docs-sidenav">
                <li><a href="#common_steps">Common steps</a></li>
                <li><a href="#installation_in_jetty">Installation in Jetty</a></li>
                <li><a href="#installation_in_tomcat">Installation in Tomcat</a></li>
                <li><a href="#installation_in_glassfish">Installation in GlassFish</a></li>
            </ul>
            <li><a href="#kaui_deployment">Kaui deployment</a></li>
        </ul>
    </div>

    <div class="span12">
        <section id="5_minutes">
            <div class="page-header">
                <h1>Killbill in 5 minutes</h1>
            </div>
            <p class="lead">Run the following in a terminal prompt:
                <div class="center span7"><pre>ruby -e "$(curl -fsSL http://killbilling.org/go)"</pre></div>
            </p>
            <br/>
            <p>The only pre-requisite is MySQL. The installer will:
                <ul>
                    <li>Create a killbill database and user, and apply the correct schema</li>
                    <li>Download the latest version of killbill</li>
                    <li>Show you how to start killbill</li>
                </ul>
            </p>
        </section>

        <section id="prod_deployment">
            <div class="page-header">
                <h1>Production deployment</h1>
            </div>
            <p class="lead">When deploying Killbill to a production environment, you'll likely want to use your own container and deploy the Killbill as a war. Below are instructions for various containers. If you're unsure which one to use and/or don't have any preference, we recommend Jetty.</p>

            <section id="common_steps">
                <div class="page-header">
                    <h2>Common steps</h2>
                </div>

                <h3>Download the latest version of Killbill server</h3>
                <p>Releases are available in Maven Central. Among other packaging formats, we provide a war with all dependencies. You can get the latest version <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.ning.billing%22%20AND%20a%3A%22killbill-server%22" target="_blank">here</a> (download the <code>jar-with-dependencies.war</code> artifact).</p>

                <h3>Setup the database</h3>
                <p>Create the database killbill will use and apply the schema which can be generated via:
                    <div class="center span7"><pre>ruby -e "$(curl -fsSL http://killbilling.org/schema)"</pre></div>
                </p>
            </section>

            <section id="installation_in_jetty">
                <div class="page-header">
                    <h2>Installation in Jetty</h2>
                </div>

                <h3>Download the Jetty container</h3>
                <p>If you don't have it yet, you can download the Jetty container <a href="http://download.eclipse.org/jetty/" target="_blank">here</a>. If you're unsure which version to use, we recommend <strong>8.1.7.v20120910</strong>. Make sure you can unpack and start Jetty as describe <a href="http://wiki.eclipse.org/Jetty/Howto/Install_Jetty" target="_blank">here</a>.</p>

                <p>Jetty ships with examples you can safely remove:
                    <ul>
                        <li>contexts/javadoc.xml</li>
                        <li>contexts/test.d/override-web.xml</li>
                        <li>contexts/test.xml</li>
                        <li>webapps/spdy.war</li>
                        <li>webapps/test.war</li>
                    </ul>
                </p>

                <h3>Deploy Killbill in Jetty</h3>
                <p>Place the downloaded Killbill war under <strong>webapps/root.war</strong> in the Jetty folder.</p>
                <p>Update the start.ini file with Killbill specific configuration. Here is a working example (make sure to update the first three properties using your database credentials):
                    <pre>
# Killbill properties
-Dcom.ning.jetty.jdbi.url=jdbc:mysql://127.0.0.1:3306/killbill
-Dcom.ning.jetty.jdbi.user=killbill
-Dcom.ning.jetty.jdbi.password=killbill
-Dkillbill.catalog.uri=catalog.xml
-Dkillbill.overdue.uri=overdue.xml
-Dkillbill.payment.retry.days=8,8,8
-Duser.timezone=UTC
-Dkillbill.payment.engine.notifications.sleep=5000
-Dkillbill.invoice.engine.notifications.sleep=5000
-Dkillbill.entitlement.engine.notifications.sleep=5000
-Dkillbill.billing.util.persistent.bus.sleep=5000
-Dkillbill.billing.util.persistent.bus.nbThreads=1


# Start classpath OPTIONS
OPTIONS=Server,resources,ext,plus,annotations

# Configuration files
etc/jetty.xml
etc/jetty-annotations.xml
etc/jetty-deploy.xml
etc/jetty-webapps.xml</pre>
                </p>
                <p>You should now be all set! Killbill can be started via the command <pre>java -jar start.jar</pre></p>

                <h3>Enable SSL</h3>
                <p>The following command generates a key pair and certificate directly into a keystore: <pre>keytool -keystore keystore -alias jetty -genkey -keyalg RSA</pre>Save the keystore file under the etc directory of the Jetty distribution.</p>
                <p>In your start.ini file, add the <pre>etc/jetty-ssl.xml</pre> configuration file and edit this file to update the <strong>KeyStorePassword</strong>, <strong>KeyManagerPassword</strong> and <strong>TrustStorePassword</strong> directives with the passwords you specified when you ran the keytool command.</p>
                <p>Killbill should now be available over SSL. For more details, see the Jetty guide <a href="http://wiki.eclipse.org/Jetty/Howto/Configure_SSL" target="_blank">here</a>.</p>
            </section>

            <section id="installation_in_tomcat">
                <div class="page-header">
                    <h2>Installation in Tomcat</h2>
                </div>
                <p>TODO</p>
            </section>

            <section id="installation_in_glassfish">
                <div class="page-header">
                    <h2>Installation in GlassFish</h2>
                </div>
                <h3>Download the GlassFish container</h3>
                <p>If you don't have it yet, you can download the GlassFish container <a href="http://glassfish.java.net/" target="_blank">here</a>. If you're unsure which version to use, we recommend <strong>3.1.2.2</strong>.</p>

                <h3>Deploy Killbill in GlassFish</h3>
                <p>Configure GlassFish with your Killbill specific configuration in <strong>domains/domain1/config/domain.xml</strong> (make sure to update the first three properties using your database credentials):
                    <pre>
&lt;jvm-options&gt;-Dcom.ning.jetty.jdbi.url=jdbc:mysql://127.0.0.1:3306/killbill&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dcom.ning.jetty.jdbi.user=killbill&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dcom.ning.jetty.jdbi.password=killbill&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dkillbill.catalog.uri=catalog.xml&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dkillbill.overdue.uri=overdue.xml&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dkillbill.payment.retry.days=8,8,8&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Duser.timezone=UTC&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dkillbill.payment.engine.notifications.sleep=5000&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dkillbill.invoice.engine.notifications.sleep=5000&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dkillbill.entitlement.engine.notifications.sleep=5000&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dkillbill.billing.util.persistent.bus.sleep=5000&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dkillbill.billing.util.persistent.bus.nbThreads=1&lt;/jvm-options&gt;</pre>
                </p>
                <p>In the glassfish directory of the unzipped GlasshFish distribution, run the following command: <pre>./bin/asadmin start-domain ; ./bin/asadmin deploy --contextroot "/" /path/to/killbill.war</pre> You should now be all set!</p>
            </section>
        </section>

        <section id="kaui_deployment">
            <div class="page-header">
                <h1>Kaui deployment</h1>
            </div>
            <p class="lead">Kaui, the Killbill Admin UI, is a Rails mountable engine that can be deployed in any Rails app. We provide a mountable engine to integrate more easily in existing companies internal tools, although it can be as easily deployed in a brand new Rails app.</p>

            <p>Kaui is being continuously tested against various versions of Ruby and JRuby. Its only requirement is Rails 3.2.3 (or later) and Bundler 1.1.4 (or later).</p>

            <p>The following guide will help you setup a brand new Rails app running Kaui. The first step is to generate a standard Rails application: <pre>rails new kbadmin --skip-bundle --skip-active-record</pre> Kaui doesn't have any database dependency, it interacts instead with Killbill over HTTP (Rest APIs) to fetch and update billing data.</p>

            <p>The next step is to get the Kaui gem via Rubygems: <pre>gem install kaui</pre></p>
            <p>Finally, install Killbill in your new Rails app: <pre>cd kbadmin ; bundle install ; rm -f public/index.html ; kaui</pre> By default, Kaui expects Killbill to run at 127.0.0.1:8080. You can override it by setting the following variable: <pre>export KILLBILL_URL="http://killbill.company.com:8080"</pre> You can also specify your tenant credentials, e.g.: <pre>export KILLBILL_URL="http://bob:lazar@127.0.0.1:8080"</pre> You're now ready to start Kaui: <pre>rails server</pre></p>

            <p>The kaui install script has various options, see <pre>kaui --help</pre> Among useful switches:
<pre>
# To specify the path to your app
kaui /path/to/rails/app
# For development
kaui /path/to/rails/app --path=/path/to/kaui/gem
</pre>
            </p>
        </section>
    </div>
</div>
