<section id="http_api">
    <div class="page-header">
        <h1>HTTP API</h1>
    </div>
    <p class="lead">
    Each POST/PUT/DELETE needs at least a non null X-Killbill-CreatedBy header; failure to do so will return a 400 (BAD_REQUEST) error code.
    </p>

    <h2>Account</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/accounts/&lt;account_id&gt;</td>
                    <td></td>
                    <td>Retrieve account specified by account_id</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/accounts/&lt;account_id&gt;/bundles</td>
                    <td></td>
                    <td>Retrieve bundles associated with account specified by account_id</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/accounts/&lt;account_id&gt;/paymentMethods</td>
                    <td>withPluginInfo</td>
                    <td>Retrieves the payment methods by account_id</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/accounts</td>
                    <td>external_key</td>
                    <td>Retrieves account specified by external_key</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/accounts</td>
                    <td></td>
                    <td>Create account</td>
                    <td>201, 400</td>
                </tr>
                <tr>
                    <td>PUT /1.0/kb/accounts/&lt;account_id&gt;</td>
                    <td></td>
                    <td>Update account</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>DELETE /1.0/kb/accounts/&lt;account_id&gt;</td>
                    <td></td>
                    <td>Delete account specified by account_id â€“ cancel all subscriptions</td>
                    <td>204, 400</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/accounts/&lt;account_id&gt;/paymentMethods</td>
                    <td>isDefault</td>
                    <td>Creates a new payment method for the account specified account_id</td>
                    <td>201, 400</td>
                </tr>
                <tr>
                    <td>PUT /1.0/kb/accounts/&lt;account_id&gt;/paymentMethods/payment_method_id/setDefault</td>
                    <td></td>
                    <td>Set paymentMethod as default for the account specified account_id</td>
                    <td>200, 400</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/accounts/&lt;account_id&gt;/emails</td>
                    <td></td>
                    <td></td>
                    <td>200, 400</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/accounts/&lt;account_id&gt;/emails</td>
                    <td></td>
                    <td>Get the list of emails associated with an account</td>
                    <td>201, 400</td>
                </tr>
                <tr>
                    <td>DELETE /1.0/kb/accounts/&lt;account_id&gt;/emails/<email></td>
                    <td></td>
                    <td>Remove an email associated with an account</td>
                    <td>200, 400</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/accounts/&lt;account_id&gt;/emailNotifications</td>
                    <td></td>
                    <td>Check whether email notifications are turned on for this account</td>
                    <td>200, 404</td>
                </tr>
                <tr>
                    <td>PUT /1.0/kb/accounts/&lt;account_id&gt;/emailNotifications</td>
                    <td></td>
                    <td>Update email notifications for this account</td>
                    <td>200, 404</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Bundle</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/bundles/&lt;bundle_id&gt;</td>
                    <td></td>
                    <td>Retrieve bundle specified by bundle_id</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/bundles/&lt;bundle_id&gt;/subscriptions</td>
                    <td></td>
                    <td>Retrieve subscriptions associated with bundle specified by bundle_id</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/bundles</td>
                    <td>external_key</td>
                    <td>Retrieve bundle specified by external_key</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/bundles</td>
                    <td></td>
                    <td>Create bundle</td>
                    <td>201, 400, 404</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Subscription</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/subscriptions/&lt;subscription_id&gt;</td>
                    <td></td>
                    <td>Retrieve the current subscription state</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/subscriptions</td>
                    <td>requested_date,call_completion,call_timeout_sec</td>
                    <td>Create a new subscription</td>
                    <td>201, 400</td>
                </tr>
                <tr>
                    <td>PUT /1.0/kb/subscriptions/&lt;subscription_id&gt;</td>
                    <td>requested_date,call_completion,call_timeout_sec</td>
                    <td>Change subscription</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>PUT /1.0/kb/subscriptions/&lt;subscription_id&gt;/uncancel</td>
                    <td></td>
                    <td>Uncancel a future cancelled subscription</td>
                    <td>200, 204, 400</td>
                </tr>
                <tr>
                    <td>DELETE /1.0/kb/subscriptions/&lt;subscription_id&gt;</td>
                    <td>requested_date,call_completion,call_timeout_sec</td>
                    <td>Cancel subscription specified by subscription_id</td>
                    <td>200, 204, 400</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Tag</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/tag_definitions</td>
                    <td></td>
                    <td>Retrieve all tag definitions </td>
                    <td>200, 204</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/tag_definitions/&lt;tag_name&gt;</td>
                    <td></td>
                    <td>Create a new tag definition</td>
                    <td>201, 400</td>
                </tr>
                <tr>
                    <td>DELETE /1.0/kb/tag_definitions/&lt;tag_name&gt;</td>
                    <td>force_if_used</td>
                    <td>Remove the tag definition</td>
                    <td>204, 400</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/&lt;object_type&gt;/tags/&lt;object_id&gt;/tags</td>
                    <td></td>
                    <td>Retrieve the tags associated with that object</td>
                    <td>200, 404</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/&lt;object_type&gt;/tags/&lt;object_id&gt;</td>
                    <td>taglist</td>
                    <td>Attach a list of tags to that object</td>
                    <td>201, 400</td>
                </tr>
                <tr>
                    <td>DELETE  /1.0/kb/&lt;object_type&gt;/tags/&lt;object_id&gt;</td>
                    <td>taglist</td>
                    <td>Remove all tags associated with that object</td>
                    <td>204, 400</td>
                </tr>
                <tr>
                    <td>DELETE  /1.0/kb/&lt;object_type&gt;/tags/&lt;object_id&gt;</td>
                    <td></td>
                    <td>Remove all tags associated with that object</td>
                    <td>204, 400</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/&lt;object_type&gt;/tags</td>
                    <td>taglist</td>
                    <td>Retrieve all objects which have those tag</td>
                    <td>200, 404</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Custom Field</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/&lt;object_type&gt;/custom_fields/&lt;object_id&gt;</td>
                    <td></td>
                    <td>Retrieve the custom fields associated with that object</td>
                    <td>200, 204</td>
                </tr>
                <tr>
                    <td>PUT /1.0/kb/&lt;object_type&gt;/custom_fields/&lt;object_id&gt;</td>
                    <td></td>
                    <td>Modify the custom field associated to that object </td>
                    <td>204, 400</td>
                </tr>
                <tr>
                    <td>DELETE /1.0/kb/&lt;object_type&gt;/custom_fields/&lt;object_id&gt;</td>
                    <td>name</td>
                    <td>Remove the custom field</td>
                    <td>204, 400</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Account Timeline</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/accounts/&lt;account_id&gt;/timeline</td>
                    <td></td>
                    <td>Retrieve account timeline for specified account_id</td>
                    <td>200, 204</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Bundle Timeline and Repair</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/bundles/&lt;bundle_id&gt;/timeline</td>
                    <td></td>
                    <td>Retrieve bundle timeline for specified bundle_id</td>
                    <td>200, 404</td>
                </tr>
                <tr>
                    <td>PUT /1.0/kb/bundles/&lt;bundle_id&gt;/timeline</td>
                    <td>dryRun, waitForBillingComplete, billingCompleteTimeout</td>
                    <td>Repair a specific bundle by providing the set of new/deleted events</td>
                    <td>201, 400, 408, 409</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Payment</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/invoices/&lt;invoice_id&gt;/payments</td>
                    <td></td>
                    <td>Retrieve status for payment matching the invoice specified by invoice_id</td>
                    <td>200, 404</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/invoices/&lt;invoice_id&gt;/payments</td>
                    <td>externalPayment</td>
                    <td>Trigger an instant payment to pay the invoice specified by invoice_id</td>
                    <td>201, 400, 404</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/accounts/&lt;account_id&gt;/payments</td>
                    <td>last4CC, nameOnCC</td>
                    <td>Retrieve payment for that account based on the query params</td>
                    <td>200, 404</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h1>Payment Method</h1>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>PUT /1.0/kb/paymentMethods/&lt;payment_method_id&gt;</td>
                    <td></td>
                    <td>Update payment method properties</td>
                    <td>200, 404</td>
                </tr>
                <tr>
                    <td>DELETE /1.0/kb/paymentMethods/&lt;payment_method_id&gt;</td>
                    <td></td>
                    <td>Delete payment method properties</td>
                    <td>200, 404</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Refund</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/accounts/&lt;account_id&gt;/refunds</td>
                    <td></td>
                    <td>Retrieve the refund information associated to that account</td>
                    <td>200, 404</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/payments/&lt;payment_id&gt;/refunds</td>
                    <td></td>
                    <td>Retrieve the refund information associated to that payment</td>
                    <td>200, 404</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/payments/&lt;payment_id&gt;/refunds</td>
                    <td>refund_amount</td>
                    <td>Trigger a refund against the specified payment</td>
                    <td>201, 400, 404</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Chargeback</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/chargebacks/accounts/&lt;account_id&gt;</td>
                    <td></td>
                    <td>Retrieve the chargeback information associated to that account</td>
                    <td>200, 204</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/chargebacks/payments/&lt;payment_id&gt;</td>
                    <td></td>
                    <td>Retrieve the chargeback information associated to that payment</td>
                    <td>200, 204</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/chargebacks/payments/&lt;payment_id&gt;</td>
                    <td></td>
                    <td>Create a chargeback against a given payment</td>
                    <td>201, 400, 404</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Credit</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>POST /1.0/kb/accounts/&lt;account_id&gt;</td>
                    <td></td>
                    <td>Create a credit for that account</td>
                    <td>201, 400, 404</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>Invoice</h2>
    <div class="api_table">
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Query params</th>
                    <th>Description</th>
                    <th>Return codes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET /1.0/kb/invoices/&lt;invoice_id&gt;</td>
                    <td></td>
                    <td>Retrieve the invoice specified with invoice_id</td>
                    <td>200, 404</td>
                </tr>
                <tr>
                    <td>GET /1.0/kb/invoices</td>
                    <td>account_id</td>
                    <td>Retrieve the invoices associated to that account</td>
                    <td>200, 404</td>
                </tr>
                <tr>
                    <td>POST /1.0/kb/invoices</td>
                    <td>account_id,target_date,dry_run</td>
                    <td>Create an invoice for that account</td>
                    <td>201, 400, 404</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>
