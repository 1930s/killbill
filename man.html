---
layout: default
---

<div class="row">
    <div class="span3 bs-docs-sidebar">
        <ul class="nav nav-list bs-docs-sidenav affix">
            <li><a href="#billing_semantics"><i class="icon-chevron-right"></i>Billing semantics</a></li>
            <li><a href="#configuration"><i class="icon-chevron-right"></i>Configuration</a></li>
            <li><a href="#catalog"><i class="icon-chevron-right"></i>Catalog</a></li>
            <li><a href="#analytics"><i class="icon-chevron-right"></i>Analytics</a></li>
            <li><a href="#http_api"><i class="icon-chevron-right"></i>HTTP API</a></li>
            <li><a href="#ui"><i class="icon-chevron-right"></i>UI</a></li>
        </ul>
    </div>

    <div class="span12">
        <section id="billing_semantics">
            <div class="page-header">
                <h1>Billing semantics</h1>
            </div>

            <h2>Invoices</h2>
            <p>Killbill works by triggers (as opposed to batch-oriented systems). Invoices are generated automatically, when:
                <ul>
                    <li>there is a change for a subscription (creation, change of plan, cancellation, etc.)</li>
                    <li>on a recurring phase of a subscription, the system detects a recurring charge is due (e.g. monthly recurring subscriptions)</li>
                    <li>an operator either creates an external charge, adjusts a past invoice or triggers a future invoice</li>
                </ul>
            </p>

            <p>After an invoice has been generated, its balance is positive or zero. If it's positive, the customer needs to pay its balance. Each time an invoice would become negative, the system automatically inserts a special item, called credit balance adjustment (CBA), to bring back the balance to zero. That credit is automatically added to the account and used on future invoices. If the invoice is paid, a payment is added against that payment. If that invoice is adjusted later on, a CBA item will be automatically generated and appear on the invoice. Killbill invoices are not static, although the items are, i.e. one can add items to past invoices.</p>

            <p>The various types of invoice items are:
                <ul>
                    <li>RECURRING: Recurring charge. Used for items with a billing period. This item is always positive or zero</li>
                    <li>FIXED: Fixed (one-time) charge. Used for items without a billing period (non recurring phase, e.g. trials). This item is always positive or zero</li>
                    <li>EXTERNAL_CHARGE: Fixed (one-time) external charge, for items not in the catalog. This item is always positive</li>
                    <li>ITEM_ADJ: Invoice item adjustment, generated by an operator (often associated with a refund). This item is always negative</li>
                    <li>REFUND_ADJ: Invoice level adjustment (against a posted payment). This item is always negative</li>
                    <li>CREDIT_ADJ: Invoice level adjustment (credits), either at the account level (on its own invoice) or against an existing invoice. This item is always negative</li>
                    <li>REPAIR_ADJ: Internal adjustment, generated automatically by the system for an invoice on which the subscription was modified (immediate cancellation or change). The items is always negative</li>
                    <li>CBA_ADJ: Internal adjustment, generated automatically by the system for an invoice which became negative (account level credits). Positive when generating credits, negative when consuming account level credits. The sum of CBA items for an account should always be positive or zero</li>
                </ul>
            </p>

            <p>Recurring invoice items start and end on the same day of the month. For example, a monthly subscription starting on the 21st will have items for the service period 2012-08-21 to 2012-09-21, 2012-09-21 to 2012-10-21, etc. Fixed items have only a start date and never get pro-rated.</p>
        </section>

        <section id="configuration">
            <div class="page-header">
                <h1>Configuration</h1>
            </div>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                    <tr>
                        <th>Property</th>
                        <th>Default</th>
                        <th>Description</th>
                        <th>Required?</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>killbill.catalog.uri</td>
                        <td>jar:///com/ning/billing/irs/catalog/Catalog.xml</td>
                        <td>Catalog location. Either in the classpath or in the filesystem</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.entitlement.engine.notifications.sleep</td>
                        <td>500</td>
                        <td>Sleep time in milliseconds for the entitlement notifications</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.entitlement.engine.notifications.off</td>
                        <td>false</td>
                        <td>Whether the entitlement notification queue should be disabled (useful for testing)</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.invoice.engine.notifications.sleep</td>
                        <td>500</td>
                        <td>Sleep time in milliseconds for the invoice notifications</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.invoice.engine.notifications.off</td>
                        <td>false</td>
                        <td>Whether the invoice notification queue should be disabled (useful for testing)</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.invoice.maxNumberOfMonthsInFuture</td>
                        <td>36</td>
                        <td>Maximum target date to consider when generating an invoice</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.invoice.emailNotificationsEnabled</td>
                        <td>false</td>
                        <td>Whether to send email notifications on invoice creation (for configured accounts)</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.mail.smtp.host</td>
                        <td><em>null</em></td>
                        <td>MTA host used for email notifications</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.mail.smtp.port</td>
                        <td><em>null</em></td>
                        <td>MTA port used for email notifications</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.mail.smtp.auth</td>
                        <td>false</td>
                        <td>Whether to authenticate against the MTA</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.mail.smtp.user</td>
                        <td><em>null</em></td>
                        <td>Username to use to authenticate against the MTA</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.mail.smtp.password</td>
                        <td><em>null</em></td>
                        <td>Password to use to authenticate against the MTA</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.mail.from</td>
                        <td>support@example.com</td>
                        <td>Default From: field for email notifications</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.overdue.uri</td>
                        <td>jar:///com/ning/billing/irs/overdue/Config.xml</td>
                        <td>Overdue configuration location. Either in the classpath or in the filesystem</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.overdue.engine.notifications.sleep</td>
                        <td>500</td>
                        <td>Sleep time in milliseconds for the overdue notifications</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.overdue.engine.notifications.off</td>
                        <td>false</td>
                        <td>Whether the overdue notification queue should be disabled (useful for testing)</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.payment.engine.notifications.sleep</td>
                        <td>500</td>
                        <td>Sleep time in milliseconds for the payment notifications</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.payment.engine.notifications.off</td>
                        <td>false</td>
                        <td>Whether the payment notification queue should be disabled (useful for testing)</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.payment.provider.default</td>
                        <td>noop</td>
                        <td>Default payment provider to use</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.payment.retry.days</td>
                        <td>8,8,8</td>
                        <td>Schedule to use to retry payments</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.payment.failure.retry.start.sec</td>
                        <td>300</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.payment.failure.retry.multiplier</td>
                        <td>2</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.payment.failure.retry.max.attempts</td>
                        <td>8</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>killbill.payment.failure.retry.multiplier</td>
                        <td>2</td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="catalog">
            <div class="page-header">
                <h1>Catalog</h1>
            </div>	      
	      {% include catalog.textile %}
        </section>
    </div>
</div>
